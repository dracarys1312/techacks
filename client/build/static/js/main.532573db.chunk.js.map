{"version":3,"sources":["components/NavBar.js","components/Footer.js","About.js","API.js","LogEntryForm.js","App.js","index.js"],"names":["Navbar","class","href","React","Component","Footer","About","src","API_URL","window","location","hostname","listLogEntries","a","fetch","response","json","createLogEntry","entry","method","headers","body","JSON","stringify","get","includes","text","message","ok","error","Error","LogEntryForm","onClose","useState","loading","setLoading","setError","useForm","register","handleSubmit","onSubmit","data","latitude","longitude","console","className","htmlFor","name","required","ref","rows","type","disabled","App","logEntries","setLogEntries","showPopup","setShowPopup","addEntryLocation","setAddEntryLocation","width","height","zoom","viewport","setViewport","getEntries","useEffect","mapStyle","mapboxApiAccessToken","onViewportChange","onDblClick","event","lngLat","map","Fragment","key","_id","onClick","style","version","id","x","y","viewBox","d","closeButton","closeOnClick","dynamicPosition","anchor","title","organizer","description","externalLink","Date","date","toLocaleDateString","routing","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.532573db.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nclass Navbar extends React.Component{\n    render() {\n        return (\n          <nav class=\"navbar bg-primary navbar-light\" >\n            <div class=\"container d-flex justify-content-center\"> <a class=\"navbar-brand\" href=\"/\">Maptivist</a> </div>\n          </nav>\n        );\n    }\n}\n\nexport default Navbar;\n","import React, { useState, useEffect } from 'react';\n\nclass Footer extends React.Component{\n  render() {\n    return(\n      <div class=\"py-3 bg-primary\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-md-12 text-center d-md-flex justify-content-between align-items-center\">\n              <ul class=\"nav d-flex justify-content-center\">\n                <li class=\"nav-item\"> <a class=\"nav-link active\" href=\"/\">Home</a> </li>\n                <li class=\"nav-item\"> <a class=\"nav-link\" href=\"/about\">About us</a> </li>\n                <li class=\"nav-item\"> <a class=\"nav-link\" href=\"/\">Terms of use</a> </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Footer;\n","import React, { useState, useEffect } from 'react';\nimport Navbar from \"./components/NavBar\";\nimport Footer from \"./components/Footer\";\n\nclass About extends React.Component{\n  render() {\n    return(\n      <>\n      <Navbar />\n      <div class=\"py-5 bg-primary\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"px-md-5 p-3 col-md-6 d-flex flex-column align-items-start justify-content-center\">\n              <h1>A platform for activists</h1>\n              <p class=\"mb-3 lead\">Mapivist is a platform to help activists spread the message and share information about happening activities in their local area.\n\n              With Mapivist, we aim to raise people's awareness of the local issues as well as help activists gain media attention and find support they need.</p>\n            </div>\n            <div class=\"col-md-6\"> <img class=\"img-fluid d-block\" src=\"https://static.pingendo.com/img-placeholder-tablet.svg\"/>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"py-5\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"px-5 col-md-8 text-center mx-auto\">\n              <h3 class=\"display-4 text-dark\"> <b>Pingendo</b> </h3>\n              <h2 class=\"my-3\">I am so happy, my dear friend.</h2>\n              <p class=\"mb-3\">I throw myself down among the tall grass by the trickling stream; and, as I lie close to the earth, a thousand unknown plants are noticed by me: when I hear the buzz of the little world among the stalks, and grow familiar with the countless indescribable.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n      </>\n    );\n  }\n}\n\nexport default About;\n","const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:1337' : 'http://www.example.com/';\n\nexport async function listLogEntries() {\n  const response = await fetch(`${API_URL}/api/logs`);\n  return response.json();\n}\n\nexport async function createLogEntry(entry) {\n  const apiKey = \"pk.eyJ1IjoibnB0aGFvMTMxMiIsImEiOiJja2R3bmxtc20wZWxtMnNvYTZucmoxaHFrIn0.iAJY26z0LeiOnALb0AaALQ\";\n  // delete entry.apiKey;\n  const response = await fetch(`${API_URL}/api/logs`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n      'X-API-KEY': apiKey,\n    },\n    body: JSON.stringify(entry),\n  });\n  let json;\n  if (response.headers.get('content-type').includes('text/html')) {\n    const message = await response.text();\n    json = {\n      message,\n    };\n  } else {\n    json = await response.json();\n  }\n  if (response.ok) {\n    return json;\n  }\n  const error = new Error(json.message);\n  error.response = json;\n  throw error;\n}\n","import React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { createLogEntry } from './API';\n\nconst LogEntryForm = ({ location, onClose }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = async (data) => {\n    try {\n      setLoading(true);\n      data.latitude = location.latitude;\n      data.longitude = location.longitude;\n      await createLogEntry(data);\n      onClose();\n    } catch (error) {\n      console.error(error);\n      setError(error.message);\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"entry-form\">\n      { error ? <h3 className=\"error\">{error}</h3> : null}\n      <label htmlFor=\"title\">Title</label>\n      <input name=\"title\" required ref={register} />\n      <label htmlFor=\"organizer\">Organizer</label>\n      <input name=\"organizer\" rows={3} ref={register}></input>\n      <label htmlFor=\"description\">Description</label>\n      <textarea name=\"description\" rows={3} ref={register}></textarea>\n      <label htmlFor=\"externalLink\">External Link</label>\n      <input name=\"externalLink\" ref={register} />\n      <label htmlFor=\"date\">Date</label>\n      <input name=\"date\" type=\"date\" required ref={register} />\n      <button disabled={loading}>{loading ? 'Loading...' : 'Host Event'}</button>\n    </form>\n  );\n};\n\nexport default LogEntryForm;\n","import React, { useState, useEffect } from 'react';\nimport ReactMapGL, { Marker, Popup } from 'react-map-gl';\nimport { listLogEntries } from './API';\nimport LogEntryForm from './LogEntryForm';\n\nimport Navbar from \"./components/NavBar\";\nimport Footer from \"./components/Footer\";\n\nconst App = () => {\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [addEntryLocation, setAddEntryLocation] = useState(null);\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '83.6vh',\n    latitude: 37.6,\n    longitude: -95.665,\n    zoom: 3\n  });\n  const getEntries = async () => {\n    const logEntries = await listLogEntries();\n    setLogEntries(logEntries);\n  };\n\n  useEffect(() => {\n    getEntries();\n  }, []);\n\n  const showAddMarkerPopup = (event) => {\n    const [ longitude, latitude ] = event.lngLat;\n    setAddEntryLocation({\n      latitude,\n      longitude,\n    });\n  };\n\n  return (\n    <>\n    <Navbar />\n\n    <ReactMapGL\n      {...viewport}\n      mapStyle=\"mapbox://styles/npthao1312/ckdwonlqp3b5z19nw2pov1qth\"\n      mapboxApiAccessToken={\"pk.eyJ1IjoibnB0aGFvMTMxMiIsImEiOiJja2R2dWZtbDQybWJ3MnptaDR5NWwwd243In0.j1wEWKVw0VyKuCwVjb4MKw\"}\n      onViewportChange={setViewport}\n      onDblClick={showAddMarkerPopup}\n    >\n      {\n        logEntries.map(entry => (\n          <React.Fragment key={entry._id}>\n            <Marker\n              latitude={entry.latitude}\n              longitude={entry.longitude}\n            >\n              <div\n                onClick={() => setShowPopup({\n                  // ...showPopup,\n                  [entry._id]: true,\n                })}\n              >\n                <svg\n                  className=\"marker yellow\"\n                  style={{\n                    height: `${6 * viewport.zoom}px`,\n                    width: `${6 * viewport.zoom}px`,\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                      <path d=\"M256,0C153.755,0,70.573,83.182,70.573,185.426c0,126.888,165.939,313.167,173.004,321.035\n                        c6.636,7.391,18.222,7.378,24.846,0c7.065-7.868,173.004-194.147,173.004-321.035C441.425,83.182,358.244,0,256,0z M256,278.719\n                        c-51.442,0-93.292-41.851-93.292-93.293S204.559,92.134,256,92.134s93.291,41.851,93.291,93.293S307.441,278.719,256,278.719z\"/>\n                    </g>\n                  </g>\n                </svg>\n              </div>\n            </Marker>\n            {\n              showPopup[entry._id] ? (\n                <Popup\n                  latitude={entry.latitude}\n                  longitude={entry.longitude}\n                  closeButton={true}\n                  closeOnClick={false}\n                  dynamicPosition={true}\n                  onClose={() => setShowPopup({})}\n                  anchor=\"top\" >\n                  <div className=\"popup\">\n                    <h1>Tile: {entry.title}</h1>\n                    <h2>Orginzer: {entry.organizer}</h2>\n                    <p>Description: {entry.description}</p>\n                    <p>External Link: {entry.externalLink}</p>\n                    <small>Happening on: {new Date(entry.date).toLocaleDateString()}</small>\n                  </div>\n                </Popup>\n              ) : null\n            }\n          </React.Fragment>\n        ))\n      }\n      {\n        addEntryLocation ? (\n          <>\n          <Marker\n            latitude={addEntryLocation.latitude}\n            longitude={addEntryLocation.longitude}\n          >\n            <div>\n              <svg\n                className=\"marker red\"\n                style={{\n                  height: `${6 * viewport.zoom}px`,\n                  width: `${6 * viewport.zoom}px`,\n                }}\n                version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                <g>\n                  <g>\n                    <path d=\"M256,0C153.755,0,70.573,83.182,70.573,185.426c0,126.888,165.939,313.167,173.004,321.035\n                      c6.636,7.391,18.222,7.378,24.846,0c7.065-7.868,173.004-194.147,173.004-321.035C441.425,83.182,358.244,0,256,0z M256,278.719\n                      c-51.442,0-93.292-41.851-93.292-93.293S204.559,92.134,256,92.134s93.291,41.851,93.291,93.293S307.441,278.719,256,278.719z\"/>\n                  </g>\n                </g>\n              </svg>\n            </div>\n          </Marker>\n          <Popup\n            latitude={addEntryLocation.latitude}\n            longitude={addEntryLocation.longitude}\n            closeButton={true}\n            closeOnClick={false}\n            dynamicPosition={true}\n            onClose={() => setAddEntryLocation(null)}\n            anchor=\"top\" >\n            <div className=\"popup\">\n              <LogEntryForm onClose={() => {\n                setAddEntryLocation(null);\n                getEntries();\n              }} location={addEntryLocation} />\n            </div>\n          </Popup>\n          </>\n        ) : null\n      }\n    </ReactMapGL>\n    <Footer />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport './index.css';\nimport './style.css';\nimport './theme.css';\nimport About from './About';\nimport App from './App';\n\nconst routing = (\n<Router>\n    <Route path=\"/\" component={App} />\n    <Route path=\"/about\" component={About} />\n</Router>\n)\n\nReactDOM.render(routing, document.getElementById('root'))\n"],"sourceRoot":""}